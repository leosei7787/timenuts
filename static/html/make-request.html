<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="/css/bootstrap.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="/css/DashBoardProfile.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="/css/datepicker.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="/css/make-request.css" type="text/css" media="screen" />
		
		<link href='http://fonts.googleapis.com/css?family=Rambla' rel='stylesheet' type='text/css'>
		<link href='http://fonts.googleapis.com/css?family=Anaheim' rel='stylesheet' type='text/css'>
			
		<script type="text/javascript" src="/libs/jquery-1.8.2.js"></script> 
		<script type="text/javascript" src="/libs/bootstrap.js"></script>
		<script type="text/javascript" src="/libs/bootstrap-datepicker.js"></script>
		
	<script>
		var StartDate = "2012-12-02";
		var EndDate = "2012-12-25";
		$(function(){
			$('#dp4').datepicker()
				.on('changeDate', function(ev){
					if (ev.date.valueOf() > endDate.valueOf()){
						$('#alert').show().find('strong').text('The start date can not be greater then the end date');
					} else {
						$('#alert').hide();
						startDate = new Date(ev.date);
						$('#startDate').text($('#dp4').data('date'));
						StartDate = $('#dp4').data('date');					
					}
					$('#dp4').datepicker('hide');
				});
			$('#dp5').datepicker()
				.on('changeDate', function(ev){
					if (ev.date.valueOf() < startDate.valueOf()){
						$('#alert').show().find('strong').text('The end date can not be less then the start date');
					} else {
						$('#alert').hide();
						endDate = new Date(ev.date);
						$('#endDate').text($('#dp5').data('date'));
						EndDate = $('#dp5').data('date');
					}
					$('#dp5').datepicker('hide');
				});
		});

		var request = function(){
			$.post("/data/service/",{
				StartDate:StartDate,
				EndDate:EndDate,
				Description:$("#Description").attr("value"),
				Title:$("#Title").attr("value"),
				TimeNeeded:$("#TimeNeeded option:selected").text(),
				Skill:$("#Skill option:selected").text(),
				Geoloc:$("#Geoloc").is(':checked')?true:false
			},
			function(data){
				window.location = "/";
			}
			)
		}

		$("body").ready(function(){
			console.log("mapping");
					$("#FormSubmit").click(function(e){
						console.log("Doing request");
						request();
					})
		});


	</script>
	</head>
	<body>
		<section class="request-form">
			<div class="form-horizontal" id="requestService">
				<div class="control-group">
				    <div class="controls">
				       <h1>Make Your Request</h1>
				   </div>
				</div>
			  <div class="control-group">
			    <div class="controls">
			      <input type="text" id="Title" name="Title" placeholder="Subject">
			    </div>
			   </div>
			  <div class="control-group">
			    <div class="controls">
			    	<textarea rows="3" id="Description" name="Description" placeholder="Description"></textarea>
			    </div>
			  </div>
			  <div class="control-group">
				   <div class="controls">
				       <h5>Which skill category is suited for this request ?</h5>
				   </div>
				   <div class="controls">
					   <select id="Category" name="Category" placeholder="Categories">
						  <option>Languages</option>
						  <option>Computer Science</option>
						  <option>House Care</option>
						  <option>Personal Service</option>
						</select>
					</div>
				 </div>	
				 <div class="control-group">
					 <div class="controls">
				       <h5>Which skills may be needed ?</h5>
				 	  </div>
				   <div class="controls">
					   <select id="Skill" name="Skill" placeholder="Skills">
						  <option>English</option>
						  <option>Spannish</option>
						  <option>French</option>
						  <option>Russian</option>
						  
						  <option>Algorithm</option>
						  <option>Java</option>
						  <option>Web Application</option>
						  <option>C++</option>
						  
						  <option>Gardening</option>
						  <option>Plumbing</option>
						  <option>Electricity</option>
						  <option>cleaning</option>
						  <option>House Keeping</option>
						  
						  <option>Baby sitting</option>
						  <option>Parcel Fetching</option>
						</select>
					</div>
				</div>
			      <div class="control-group">
				     <div class="controls">
					       <h5>Deadeline ?</h5>
					   </div>
				   	 <div class="controls">
						<table class="request-table-date">
							<th>Start date<a href="#" class="btn small" id="dp4" data-date-format="yyyy-mm-dd" data-date="2012-02-20">Change</a></th>
							<td id="startDate">
								2012-02-20
							</td> <!-- todo send date in input  -->
							<th>End date<a href="#" class="btn small" id="dp5" data-date-format="yyyy-mm-dd" data-date="2012-02-25">Change</a></th>
							<td id="endDate">2012-02-25</td>
						</table>
					</div>
				</div>
				<div class="control-group">
					<div class="controls">
				     	<h5>How long may it take ?</h5>
				    </div>
				   <div class="controls">
					   <select class="span1" id="TimeNeeded" name="TimeNeeded" placeholder="Estimated time needed">
						  <option>1</option>
						  <option>2</option>
						  <option>3</option>
						  <option>4</option>
						  <option>5</option>
						</select>
					</div>
				 </div>		
				 			 
				<div class="control-group">
			    <div class="controls">
			     <label>
			     	 <h5 class="geoloc-title">Is the request geolocalized ?</h5>
 					 <input type="checkbox" id="Geoloc" name="Geoloc" value="Geoloc">
				 </label>
			    </div>
			   </div>
				<div class="form-actions">
				  <button type="submit" class="btn btn-primary" id="FormSubmit">Save changes</button>
				  <button type="button" class="btn">Cancel</button>
				</div>
			  </div>
			</div>
		</section>
		
	</body>
</html>